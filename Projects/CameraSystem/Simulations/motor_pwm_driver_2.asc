Version 4
SHEET 1 1416 772
WIRE -896 -704 -896 -736
WIRE -896 -672 -896 -704
WIRE -896 -544 -896 -592
WIRE -224 -528 -224 -560
WIRE -224 -336 -224 -528
WIRE -832 -288 -896 -288
WIRE -704 -288 -832 -288
WIRE -576 -288 -624 -288
WIRE -496 -288 -576 -288
WIRE -288 -288 -496 -288
WIRE -576 -256 -576 -288
WIRE 368 -256 368 -288
WIRE 784 -256 784 -288
WIRE -896 -240 -896 -288
WIRE -224 -176 -224 -240
WIRE -144 -176 -224 -176
WIRE -128 -176 -144 -176
WIRE -576 -160 -576 -192
WIRE 368 -160 368 -256
WIRE 368 -160 224 -160
WIRE 464 -160 368 -160
WIRE 784 -160 784 -256
WIRE 784 -160 720 -160
WIRE 928 -160 784 -160
WIRE -224 -144 -224 -176
WIRE 224 -128 224 -160
WIRE 928 -128 928 -160
WIRE -896 -112 -896 -160
WIRE 368 -64 368 -160
WIRE 784 -64 784 -160
WIRE 464 -48 464 -160
WIRE 720 -48 720 -160
WIRE -224 -16 -224 -64
WIRE 224 -16 224 -48
WIRE 304 -16 224 -16
WIRE 928 -16 928 -48
WIRE 928 -16 848 -16
WIRE 64 32 16 32
WIRE 224 32 224 -16
WIRE 224 32 64 32
WIRE 928 32 928 -16
WIRE 1040 32 928 32
WIRE 1120 32 1040 32
WIRE 1312 32 1216 32
WIRE 1328 32 1312 32
WIRE 1040 80 1040 32
WIRE 48 144 48 112
WIRE 368 144 368 32
WIRE 416 144 368 144
WIRE 464 144 464 16
WIRE 464 144 416 144
WIRE 480 144 464 144
WIRE 608 144 560 144
WIRE 720 144 720 16
WIRE 720 144 688 144
WIRE 752 144 720 144
WIRE 784 144 784 32
WIRE 784 144 752 144
WIRE 48 160 48 144
WIRE 1040 176 1040 160
WIRE 1168 176 1168 96
WIRE 1168 176 1040 176
WIRE 1232 176 1168 176
WIRE 1264 176 1232 176
WIRE 368 224 368 144
WIRE 784 224 784 144
WIRE -416 272 -480 272
WIRE -352 272 -416 272
WIRE 48 272 48 240
WIRE 128 272 48 272
WIRE 240 272 208 272
WIRE 272 272 240 272
WIRE 304 272 272 272
WIRE 464 272 464 144
WIRE 864 272 848 272
WIRE 880 272 864 272
WIRE 912 272 880 272
WIRE 944 272 912 272
WIRE 1056 272 1024 272
WIRE 1088 272 1056 272
WIRE -480 288 -480 272
WIRE 48 288 48 272
WIRE 720 288 720 144
WIRE -224 336 -240 336
WIRE -192 336 -224 336
WIRE -64 336 -112 336
WIRE -32 336 -64 336
WIRE -16 336 -32 336
WIRE 240 368 240 272
WIRE 912 368 912 272
WIRE -64 384 -64 336
WIRE 864 384 864 272
WIRE -480 400 -480 368
WIRE -32 400 -32 336
WIRE -64 528 -64 464
WIRE -32 528 -32 464
WIRE -32 528 -64 528
WIRE 48 528 48 384
WIRE 48 528 -32 528
WIRE 240 528 240 448
WIRE 240 528 48 528
WIRE 368 528 368 320
WIRE 368 528 240 528
WIRE 464 528 464 336
WIRE 464 528 368 528
WIRE 608 528 464 528
WIRE 720 528 720 352
WIRE 720 528 608 528
WIRE 784 528 784 320
WIRE 784 528 720 528
WIRE 864 528 864 448
WIRE 864 528 784 528
WIRE 912 528 912 448
WIRE 912 528 864 528
WIRE 608 576 608 528
FLAG -896 -112 0
FLAG -832 -288 PWM
FLAG -480 400 0
FLAG -416 272 DIR
FLAG -576 -160 0
FLAG -496 -288 PWM_filtered
FLAG -896 -544 0
FLAG -896 -704 3V3
FLAG 368 -256 3V3
FLAG 608 576 0
FLAG 1056 272 DIR
FLAG 784 -256 3V3
FLAG 48 144 3V3
FLAG -224 336 DIR
FLAG 1232 176 DIR
FLAG 416 144 MP
FLAG 752 144 MN
FLAG 272 272 BASE1
FLAG 880 272 BASE2
FLAG -224 -16 0
FLAG -224 -528 3V3
FLAG -144 -176 PWM_buffered
FLAG 1312 32 PWM_buffered
FLAG 64 32 PWM_buffered
SYMBOL voltage -896 -256 R0
WINDOW 3 -70 -107 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 0 1n 1n {ton} {tp})
SYMATTR SpiceLine Rser=10m
SYMBOL voltage -480 272 R0
WINDOW 3 -149 70 VRight 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 10m 1n 1n 100m 300m)
SYMATTR SpiceLine Rser=10m
SYMBOL res -608 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 160e3
SYMBOL cap -592 -256 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL pnp 304 32 M180
SYMATTR InstName Q1
SYMATTR Value BC327-25
SYMBOL res 208 -144 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL Misc\\battery -896 -688 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR InstName V3
SYMATTR Value 3.3
SYMATTR SpiceLine Rser=10m
SYMBOL res 464 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 50
SYMBOL ind 592 160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1µ
SYMBOL res 896 352 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res 1040 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 4.7k
SYMBOL res 944 -144 M0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 256 352 M0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res 112 256 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL npn -16 288 R0
SYMATTR InstName Q5
SYMATTR Value BC847C
SYMBOL res 32 144 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -48 368 M0
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -208 320 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 4.7k
SYMBOL res 1024 64 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL npn 304 224 R0
SYMATTR InstName Q2
SYMATTR Value BC847C
SYMBOL npn 848 224 M0
SYMATTR InstName Q4
SYMATTR Value BC847C
SYMBOL pnp 848 32 R180
SYMATTR InstName Q3
SYMATTR Value BC327-25
SYMBOL pnp 1216 96 M270
SYMATTR InstName Q6
SYMATTR Value BC327-25
SYMBOL cap 848 384 R0
SYMATTR InstName C2
SYMATTR Value 10n
SYMBOL cap -48 400 R0
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL res -208 -160 M0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL npn -288 -336 R0
SYMATTR InstName Q7
SYMATTR Value BC847C
SYMBOL zener 480 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 736 16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 736 352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D3
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL zener 480 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value 1N750
SYMATTR Description Diode
SYMATTR Type diode
TEXT -960 -480 Left 2 !.param freq = 1e3\n.param dc = 0.8\n.param ton = 1/freq*dc\n.param tp = 1/freq
TEXT -566 424 Left 2 !.tran 1
