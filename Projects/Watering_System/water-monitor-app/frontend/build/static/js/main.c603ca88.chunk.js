(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(t,e,n){t.exports=n(75)},42:function(t,e,n){},70:function(t,e){},73:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(32),c=n.n(r),s=(n(42),n(3)),i=n.n(s),l=n(17),u=n(8),p=n(9),f=n(35),d=n(33),h=n(2),v=n(36),w=n(34),g=n.n(w),m=(n(73),"http://localhost:3001"),b="https://localhost:3000",k={getStatus:function(){return j.get("/garden")},setWaterLevel:function(t){return j.put("/garden/setwaterlevel",{waterLevel:t})}},j=new(function(){function t(){Object(u.a)(this,t)}return Object(p.a)(t,[{key:"get",value:function(t){var e=JSON.parse(localStorage.getItem("rootKeys"));return new Promise(function(n,o){fetch(m+t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":m,"x-access-token":e?e.user.token:""}}).then(function(t){return t.ok?t.json():(403===t.status&&window.location.replace(b),t)}).then(function(t){return n(t),t}).catch(function(t){console.log(t),o(t)})})}},{key:"post",value:function(t,e){var n=JSON.parse(localStorage.getItem("rootKeys"));return new Promise(function(o,a){fetch(m+t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":m,"x-access-token":n?n.user.token:""},body:JSON.stringify(e)}).then(function(t){return t.ok?t.json():(403===t.status&&window.location.replace(b),t)}).then(function(t){return o(t),t}).catch(function(t){a(t)})})}},{key:"put",value:function(t,e,n){var o=JSON.parse(localStorage.getItem("rootKeys"));return new Promise(function(n,a){fetch(m+t,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":m,"x-access-token":o?o.user.token:""},body:JSON.stringify(e)}).then(function(t){return console.log(t),t.ok?t.json():(403===t.status&&window.location.replace(b),t)}).then(function(t){return n(t),t}).catch(function(t){a(t)})})}}]),t}());n(74);var y=function(t){console.log(t);var e={height:"".concat(t.waterLevel,"%")};return a.a.createElement("div",{className:"water-container"},a.a.createElement("div",{className:"water-container__content",style:e}),a.a.createElement("div",{className:"water-container__indicator",style:{bottom:"50%"}},t.waterLevel,"%"))},O={"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]},S=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(f.a)(this,Object(d.a)(e).call(this,t))).getGardenStatus=Object(l.a)(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getStatus();case 2:e=t.sent,console.log(e);case 4:case"end":return t.stop()}},t)})),n.setWaterLevel=function(){var t=Object(l.a)(i.a.mark(function t(e){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.setWaterLevel(e);case 2:n=t.sent,console.log(n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.state={data:{waterLevel:0},endpoint:"http://localhost:3001"},n.getGardenStatus=n.getGardenStatus.bind(Object(h.a)(n)),n.setWaterLevel=n.setWaterLevel.bind(Object(h.a)(n)),n}return Object(v.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.state,n=e.data,o=e.endpoint,a=g()(o,O);a.on("outgoingData",function(e){console.log("outgoing data:",e);var o=Object.assign({},n,e);console.log("update:",o),t.setState({data:o},function(){console.log(t.state.data)})}),a.emit("incomingData",{data:"Subscribing to channel"})}},{key:"render",value:function(){var t=this,e=this.state.data;return a.a.createElement("div",{className:"app"},a.a.createElement(y,{waterLevel:e.waterLevel}),a.a.createElement("button",{onClick:function(){return t.setWaterLevel(50)}},"Set Water"))}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.c603ca88.chunk.js.map